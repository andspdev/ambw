<header>
    <div class="d-flex align-items-center">
        <div class="flex-grow-1">
            <h4>Hi, Pandu!</h4>
            <p>Let's check your activity</p>
        </div>

        <img src="./assets/images/user-icon.png" alt="Andreas Pandu P" class="user-img" />
    </div>
</header>

<div class="activities mt-5">
    <div class="row align-content-center">
        <div class="col-6 mb-3">
            <div class="card"  style="height: 100%;">
                <div class="card-body">
                    <h5 class="card-title">üí™üèº Finished</h5>
                    
                    <div class="mt-4 text-center">
                        <div class="count-text span_f">0</div>
                        <p class="mt-2">Completed Workouts</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-6">
            <div class="card mb-3">
                <div class="card-body">
                    <h5 class="card-title">üê£ In progress</h5>
                    
                    <div class="d-flex mt-2 align-items-center">
                        <span class="count-text-medium me-3 span_ip">0</span>
                        <div class="flex-grow-1">
                            <p class="mt-3 d-inline-block">Workouts</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card mb-3">
                <div class="card-body">
                    <h5 class="card-title">‚è±Ô∏è Time spent</h5>
                    
                    <div class="d-flex mt-2 align-items-center">
                        <span class="count-text-medium me-3 span_ts">0</span>
                        <div class="flex-grow-1">
                            <p class="mt-3 d-inline-block">Minutes</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="card mb-3">
    <div class="card-body">
        <div class="d-flex align-items-center">
            <div class="me-3">
                <span class="emoji-trump">üéâ</span>
            </div>
            <div class="flex-grow-1">
                <h5 class="card-title">Keep the progress!</h5>
                <p class="m-0">You are more successful than 88% users.</p>
            </div>
        </div>
    </div>
</div>


<script>
    $(function()
    {
        const db_progress = "workouts_progress";
        let finished = 0,
        in_progress = 0,
        time_spent = 0;

        let span_f = $('.span_f'),
        span_ip = $('.span_ip'),
        span_ts = $('.span_ts')

        function getData(key) {
			const data = localStorage.getItem(key);

			if (data !== null)
				return JSON.parse(data);

			return [];
		}

        const get_data = getData(db_progress);

        if (get_data.hasOwnProperty('finished'))
        {
            const get_finished = get_data.finished.length;
            span_f.html(get_finished);
        }

        if (get_data.hasOwnProperty('in_progress'))
        {
            const get_progress = get_data.in_progress.length;
            span_ip.html(get_progress);
        }

        if (get_data.hasOwnProperty('time_spent'))
        {
            const get_time_spent = get_data.time_spent
            .reduce((accumulator, currentValue) => accumulator + currentValue, 0);

            span_ts.html(get_time_spent);
        }
    });
</script>